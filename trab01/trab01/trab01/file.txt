# Programa que calcula a soma dos divisores inteiros e positivos de um número N,
# armazenando este valor em AC no final. A palavra 1FF armazena a constante 1,
# a 200 o valor atual do divisor, a 201 a soma dos divisores e a 3FF o número N.

.org 0x000
   LD numero      # Carregar em AC o valor de N
   RSH            # Dividir o valor por 2, pois apenas os números 1 <= candidato <= N/2
                  # serão analisados (se são divisores de N ou não)
   ST M(0x202)    # Armazenar este valor na palavra 202
   
   laco:           # Início de um laco
      LD divisor   # Verificar se o divisor <= N/2
      ADD constante
      ST divisor   # Armazenar o valor do novo candidato a divisor de N
      SUB M(0x202)
      SUB constante
      JGE resultado     # Caso o candidato a divisor seja maior que N/2, pular
                        # para o comando a direita da palavra 008
      LD numero
      DIV divisor          # Realizar a divisão
      SUB constante        # Substrair 1 unidade do resto da divisão e verificar se ela
      JGE laco             # ela é inteira. Em caso negativo, voltar para o início do laco
      
      LD_MQ              # Transferir o quociente de MQ para AC
      ADD soma           # Adicionar o quociente ao valor soma e armazenar
      ST soma            # o novo valor à respectiva palavra
      JMP laco           # Voltar para o início do laco a fim de verificar um
                         # novo candidato a divisor de N
   resultado:
   LD soma            # Carregar em AC o valor final da soma dos divisores de N
   JMP M(0x400)  # Pular para o endereço inexistente 0x400, encerrando o programa

.org 0x1FF
constante: .word 0000000001  # Rótulo para a constante 1, armazenada na palavra 1FF

.org 0x200
divisor: .word 0000000000  # Rótulo para o valor atual do divisor, contido na palavra 200

.org 0x201
soma: .word 0000000001  # Rótulo para a soma dos divisores de N, contido na palavra 201
                        # Já está incluso o valor da divisão N/N = 1

.org 0x3FF
numero: .word 0x00000003E8  # Rótulo para o número N, armazenado na palavra 3FF
